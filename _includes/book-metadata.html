{% for book in site.data.books %}
{% assign bookAuthors = book.Author | split: ';' %}
{% assign pageAuthors = page.author | split: ';' %}
{% assign matchCount = 0 %}

{% for author in bookAuthors %}
  {% for pageAuthor in pageAuthors %}
    {% if pageAuthor == author %}
      {% assign matchCount = matchCount | plus: 1 %}
      {% break %}
    {% endif %}
  {% endfor %}
{% endfor %}

{%  if book.Title == page.title && if matchCount == bookAuthors.size and matchCount == pageAuthors.size %}
  {% assign authors_all = book.Author | split: '; ' %}

  Written by 
  {% for author_raw in authors_all | limit: 3 %}
      {% assign author_firstlast = author_raw | split: ', ' %}
      <a href="{{BASE_PATH}}/authors/{{ author_firstlast[0] | slugify:'latin' }}-{{ author_firstlast[1] | slugify:'latin' }}" title="{{ author_firstlast | reverse | join: '' }}">{{ author_firstlast | reverse | join: " " }}</a>
      {% unless forloop.last == true %} + {% endunless %}
  {% endfor %}
    //
     Published in <a href="{{BASE_PATH}}/cities/{{ book.Place | slugify:'latin' }}" title="{{ book.Place }}">{{ book.Place }}</a> by <a href="{{BASE_PATH}}/publishers/{{ book.Publisher | slugify:'latin' }}" title="{{ book.Publihser }}">{{ book.Publisher }}</a>
      in {{ book.Date }}{% if book.Edition == book.Date %}. First edition{% elsif book.Edition != "" and book.Edition != nil %} // First published in {{ book.Edition }}{% endif %}{% if book.Archive != "" and book.Archive != nil  %}//
      Retrieved by <a href="{{BASE_PATH}}/repositories/{{ book.Archive | slugify:'latin' }}" title="{{ book.Archive }}">{{ book.Archive }}</a>{% endif %}
{% endif %}
{% endfor %}


